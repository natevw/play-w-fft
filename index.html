<!doctype html>
<html><head>
  <meta charset="utf-8">
  <title>Play w/FFT</title>
</head><body>
  <h1>Play with FFT</h1>
  
  <div id=wave0>
    <label>
      Amplitude (%)
      <input class="amp" type="range" min=0 max=100>
    </label>
    <label>
      Frequency (Hz)
      <input class="freq" type="range" min=0 max=1000>
    </label>
    <label>
      Phase (ยบ)
      <input class="phase" type="range" min=-180 max=180>
    </label>
  </div>
  
  <canvas id=viz>[visualizer]</canvas>
  
  <script>
    const form = document.querySelector("#wave0");
    function readVals() {
      let a = form.querySelector(".amp").value,
          f = form.querySelector(".freq").value,
          p = form.querySelector(".phase").value;
      return {a,f,p};
    }
    function update () {
      const vals = readVals();
      redraw(vals);
    }
    form.addEventListener('input', update, false);
    
    
    const canvas = document.querySelector("#viz");
    const ctx = canvas.getContext("2d");
    function redraw({a,f,p}) {
      ctx.fillStyle = "black";
      ctx.fillRect(0, 0, canvas.width, canvas.height);
      
      ctx.beginPath();
      ctx.strokeStyle = "grey";
      ctx.moveTo(0, canvas.height / 2);
      ctx.lineTo(canvas.width, canvas.height / 2);
      ctx.stroke();
      
      const LX = 5;
      const LY = 0;
      const LH = 15;
      ctx.fillStyle = "white";
      ctx.fillText(`Amplitude: ${a}%`, LX, LY + 1 * LH);
      ctx.fillText(`Frequency: ${f} Hz`, LX, LY + 2 * LH);
      ctx.fillText(`Phase: ${p}ยบ`, LX, LY + 3 * LH);
    }
    update();
  </script>
  
</body>